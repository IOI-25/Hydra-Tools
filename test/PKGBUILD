pkgname=hydra-tools
pkgver=26.1.1
pkgrel=1
epoch=
pkgdesc="Hydra is a package manager for IOI"
arch=('x86_64')
url="https://github.com/IOI-25/Hydra-Tools"
license=('GPL')
groups=()
depends=()
makedepends=()
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("https://github.com/IOI-25/Hydra-Tools/raw/refs/heads/main/releases/update/$pkgver/hydra-pacman-$pkgver.tar.gz")
noextract=()
sha256sums=("93e119f73e718c420c984d1ea3b376fd12fbe383ef5df01e70f9fb790fd35549")
validpgpkeys=()


check() {
	bash -n $srcdir/Hydra/main.sh
}

package() {
	mkdir -p "$pkgdir/usr/bin"
	install -Dm755 $srcdir/Hydra/main.sh "$pkgdir/usr/lib/IOI/Hydra/main.sh"
	install -Dm755 $srcdir/Hydra/src/lib/install "$pkgdir/usr/lib/IOI/Hydra/src/lib/install"
	install -Dm644 $srcdir/Hydra/info.toml "$pkgdir/usr/lib/IOI/Hydra/info.toml"
	install -Dm644 $srcdir/Hydra/requirements.txt "$pkgdir/usr/lib/IOI/Hydra/requirements.txt"
	cp -r $srcdir/Hydra/src "$pkgdir/usr/lib/IOI/Hydra/src"
	cp -r $srcdir/Hydra/.secrets "$pkgdir/usr/lib/IOI/Hydra/.secrets"
	install -Dm644 $srcdir/Hydra/docs/commands_hydra "$pkgdir/usr/lib/IOI/Hydra/docs/commands_hydra"
	chmod -R 755 "$pkgdir/usr/lib/IOI/Hydra/src"
	chmod -R 644 "$pkgdir/usr/lib/IOI/Hydra/.secrets"
	chmod 755 "$pkgdir/usr/lib/IOI/Hydra/docs"
	cat << EOF > "$pkgdir/usr/bin/hyd"
#!/usr/bin/env bash
bash /usr/lib/IOI/Hydra/main.sh \$@
EOF
	chmod +x "$pkgdir/usr/bin/hyd"
}